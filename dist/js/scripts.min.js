let bookRepository=function(){let t=[],o="https://gutendex.com/books";function n(){return t}function e(t){$("#loading").text(t)}function i(){$("#loading").text("")}return{getAll:n,addListItem:function t(n){let r=$("<button>").attr("type","button").addClass("list-group-item list-group-item-action").text(n.title).click(()=>(function t(n){(function t(n){e("Loading details...");let r=`${o}/${n.id}`;return fetch(r).then(function(t){return t.json()}).then(function(t){n.coverUrl=t.formats["image/jpeg"]}).catch(function(t){console.error(t)}).finally(function(){i()})})(n).then(function(){var t;t=n,$("#book-modal-title").text(t.title),$(".modal-body").text("").append($("<p>").text(`By: ${t.authors[0].name}`)).append($("<img>").attr("src",t.coverUrl).attr("alt",t.title)),$("#book-modal").modal()})})(n));$(".book-list").append(r)},loadList:function n(){return e("Loading books..."),fetch(o).then(function(t){return t.json()}).then(function(o){o.results.forEach(function(o){var n;"object"==typeof(n={id:o.id,title:o.title,authors:o.authors})&&t.push(n)})}).catch(function(t){console.error(t)}).finally(function(){i()})}}}();bookRepository.loadList().then(function(){bookRepository.getAll().forEach(function(t){bookRepository.addListItem(t)})});